@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.apidocumentation.config._
@import uk.gov.hmrc.apidocumentation.models._
@import include._

@(pageAttributes: PageAttributes)(implicit request: play.api.mvc.Request[Any], applicationConfig: ApplicationConfig, messages: Messages)

@apiMain(pageAttributes) {
    <h1 class="flush--top api_title heading-xlarge">Using the Sandbox</h1>

    <nav role="navigation" aria-labelledby="usingTheSandbox" class="divider--bottom two-col-list full-width">
        <div class="two-col-list__col two-col-list__col--left">
            <ul class="two-col-list--padded">
                <li><a href="introduction">Introduction</a></li>
                <li>Getting started</li>
            </ul>
        </div>

        <div class="two-col-list__col two-col-list__col--right">
            <ul class="two-col-list--padded">
                <li><a href="stateful-behaviour">Stateful behaviour</a></li>
                <li><a href="data-cleardown">Data clear down</a></li>
            </ul>
        </div>
    </nav>

    <div class="section divider--bottom">
        <h2 id="intro" class="heading-large">Getting started</h2>

        <h3 class="heading-medium flush--ends">Register for a Sandbox account</h3>
        <p>
            As the Sandbox is isolated from the production environment, you will need to <a href="/developer/registration">register
            a separate Sandbox account</a>.
        </p>

        <h3 class="heading-medium flush--ends">Add an application</h3>
        <p>
            Once you have registered, add a new application that you will use for testing.
        </p>

        <h3 class="heading-medium flush--ends">Request access to an API</h3>
        <p>
            You have to subscribe to an API so your application can access it. Subscribe via the
            API subscriptions tab.
        </p>

        <h3 class="heading-medium flush--ends">Add credentials to the application</h3>
        <p>
            Your application will be issued with test credentials which will be available via the
            Testing Credentials tab. These can only be used to access the Sandbox environment.
        </p>

        <div class="sandbox--visible alert alert--info">
                For production credentials, go to the
                <a id="production-banner" rel="external"
                   href="https://developer.service.hmrc.gov.uk/api-documentation" >Developer Hub</a>
        </div>

        <p/>

        <h3 class="heading-medium flush--ends">Create test user</h3>
        <p>
            To test <a href="/api-documentation/docs/authorisation#user-restricted">user-restricted endpoints</a>,
            you need to create one or more test users:
        </p>

        <ul class="bullets">
            <li>Use the <a href="/api-test-user">Create Test User service</a> to manually create individuals or
                organisations with a default set of service enrolments.
            </li>

            <li>Use the <a href="/api-documentation/docs/api/service/api-platform-test-user">Create Test User API</a>
                to create a wider variety of test users or if you use automated testing.
            </li>
        </ul>

        <p>
            Each test user is unique, with its own user ID, password and tax identifiers (e.g. SA UTR and NINO for an
            individual). The user details are generated automatically by us - you cannot choose them.
        </p>

        <p>
            You can create as many test users as you like. Each new test user effectively provides a "clean" test
            environment. Test users can be shared across applications and amongst test team members, but they do have a
            limited life span as explained later.
        </p>
    </div>

    <nav class="page-nav" role="navigation"
        aria-label="Page navigation">
        <ul>
            <li class="page-nav__item page-nav__item--previous">
                <a class="page-nav__link page-nav__link--previous"
                    title="Navigate to previous part" rel="prev" href="introduction">
                    <span class="page-nav__label">Previous</span>
                    <span class="page-nav__title">Introduction</span>
                </a>
            </li>
            <li class="page-nav__item page-nav__item--next">
                <a class="page-nav__link page-nav__link--next"
                    title="Navigate to next part" rel="next" href="stateful-behaviour">
                    <span class="page-nav__label">Next</span>
                    <span class="page-nav__title">Stateful Behaviour</span>
                </a>
            </li>
        </ul>
    </nav>
}
